<%
  the_form = Class.new(ApplicationForm) do
    form do |query_form|
      query_form.single_date_picker(
          name: :date,
          label: 'Date',
          leading_visual: { icon: },
          value: value.iso8601,
          datepicker_options: { inDialog: in_dialog }
        )

      query_form.single_date_picker(
          name: :date,
          label: 'Date',
          leading_visual: { icon: },
          value: value.iso8601,
          datepicker_options: { inDialog: in_dialog }
        )

      query_form.single_date_picker(
          name: :date,
          label: 'Date',
          leading_visual: { icon: },
          value: value.iso8601,
          datepicker_options: { inDialog: in_dialog }
        )
    end
  end
%>

<% if in_dialog %>
  <%= render(Primer::Alpha::Dialog.new(title: "Dialog Title",
                                       size: :large,
                                       open: true,
                                       id: "my-dialog")) do |d| %>
    <% d.with_show_button { "Show dialog" } %>
    <% d.with_header(variant: :medium) %>

    <%= render(Primer::Alpha::Dialog::Body.new) do
      primer_form_with(
            url: '/abc',
            id: "my-form") do |f|
         render(the_form.new(f))
      end
    end %>

    <%= d.with_footer do %>
      <%= render(Primer::Beta::Button.new(data: { "close-dialog-id": "my-dialog" })) { I18n.t(:button_cancel) } %>
      <%= render(Primer::Beta::Button.new(scheme: :primary, type: :submit, form: "my-form")) { I18n.t(:button_apply) } %>
    <% end %>
  <% end %>
<% else %>
  <%= primer_form_with(
            url: '/abc',
            id: "my-form") do |f|
         render(the_form.new(f))
  end %>
<% end %>
